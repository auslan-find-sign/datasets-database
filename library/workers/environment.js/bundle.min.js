(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (global){(function (){
Math.random=function(){throw new Error("Math.random() is unavailable. Lenses must be deterministic, not random")},global.Markup=require("./markup");

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./markup":2}],2:[function(require,module,exports){
const treeSelector=require("tree-selector"),treeAdapter=require("pigeonmark-utils/library/tree-selector-adapter"),utils=require("pigeonmark-utils"),querySelector=treeSelector.createQuerySelector(treeAdapter);exports.select=function(e,r){return treeAdapter.scan(e),querySelector(r,e)},exports.get=utils.get,exports.set=utils.set,exports.isPigeonMark=utils.isPigeonMark,exports.toHTML=require("pigeonmark-html/library/encode"),exports.toXML=require("pigeonmark-xml/library/encode");

},{"pigeonmark-html/library/encode":11,"pigeonmark-utils":13,"pigeonmark-utils/library/tree-selector-adapter":14,"pigeonmark-xml/library/encode":15,"tree-selector":18}],3:[function(require,module,exports){
(function (global){(function (){
"use strict";var objectAssign=require("object-assign");function compare(t,e){if(t===e)return 0;for(var r=t.length,i=e.length,n=0,a=Math.min(r,i);n<a;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0}function isBuffer(t){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var util=require("util/"),hasOwn=Object.prototype.hasOwnProperty,pSlice=Array.prototype.slice,functionsHaveNames="foo"===function(){}.name;function pToString(t){return Object.prototype.toString.call(t)}function isView(t){return!isBuffer(t)&&("function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var assert=module.exports=ok,regex=/\s*function\s+([^\(\s]*)\s*/;function getName(t){if(util.isFunction(t)){if(functionsHaveNames)return t.name;var e=t.toString().match(regex);return e&&e[1]}}function truncate(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function inspect(t){if(functionsHaveNames||!util.isFunction(t))return util.inspect(t);var e=getName(t);return"[Function"+(e?": "+e:"")+"]"}function getMessage(t){return truncate(inspect(t.actual),128)+" "+t.operator+" "+truncate(inspect(t.expected),128)}function fail(t,e,r,i,n){throw new assert.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:n})}function ok(t,e){t||fail(t,!0,e,"==",assert.ok)}function _deepEqual(t,e,r,i){if(t===e)return!0;if(isBuffer(t)&&isBuffer(e))return 0===compare(t,e);if(util.isDate(t)&&util.isDate(e))return t.getTime()===e.getTime();if(util.isRegExp(t)&&util.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(isView(t)&&isView(e)&&pToString(t)===pToString(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===compare(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(isBuffer(t)!==isBuffer(e))return!1;var n=(i=i||{actual:[],expected:[]}).actual.indexOf(t);return-1!==n&&n===i.expected.indexOf(e)||(i.actual.push(t),i.expected.push(e),objEquiv(t,e,r,i))}return r?t===e:t==e}function isArguments(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function objEquiv(t,e,r,i){if(null==t||null==e)return!1;if(util.isPrimitive(t)||util.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=isArguments(t),a=isArguments(e);if(n&&!a||!n&&a)return!1;if(n)return _deepEqual(t=pSlice.call(t),e=pSlice.call(e),r);var s,u,o=objectKeys(t),c=objectKeys(e);if(o.length!==c.length)return!1;for(o.sort(),c.sort(),u=o.length-1;u>=0;u--)if(o[u]!==c[u])return!1;for(u=o.length-1;u>=0;u--)if(!_deepEqual(t[s=o[u]],e[s],r,i))return!1;return!0}function notDeepStrictEqual(t,e,r){_deepEqual(t,e,!0)&&fail(t,e,r,"notDeepStrictEqual",notDeepStrictEqual)}function expectedException(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function _tryBlock(t){var e;try{t()}catch(t){e=t}return e}function _throws(t,e,r,i){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(i=r,r=null),n=_tryBlock(e),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!n&&fail(n,r,"Missing expected exception"+i);var a="string"==typeof i,s=!t&&n&&!r;if((!t&&util.isError(n)&&a&&expectedException(n,r)||s)&&fail(n,r,"Got unwanted exception"+i),t&&n&&r&&!expectedException(n,r)||!t&&n)throw n}function strict(t,e){t||fail(t,!0,e,"==",strict)}assert.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,n=getName(e),a=i.indexOf("\n"+n);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(t,e,r){t!=e&&fail(t,e,r,"==",assert.equal)},assert.notEqual=function(t,e,r){t==e&&fail(t,e,r,"!=",assert.notEqual)},assert.deepEqual=function(t,e,r){_deepEqual(t,e,!1)||fail(t,e,r,"deepEqual",assert.deepEqual)},assert.deepStrictEqual=function(t,e,r){_deepEqual(t,e,!0)||fail(t,e,r,"deepStrictEqual",assert.deepStrictEqual)},assert.notDeepEqual=function(t,e,r){_deepEqual(t,e,!1)&&fail(t,e,r,"notDeepEqual",assert.notDeepEqual)},assert.notDeepStrictEqual=notDeepStrictEqual,assert.strictEqual=function(t,e,r){t!==e&&fail(t,e,r,"===",assert.strictEqual)},assert.notStrictEqual=function(t,e,r){t===e&&fail(t,e,r,"!==",assert.notStrictEqual)},assert.throws=function(t,e,r){_throws(!0,t,e,r)},assert.doesNotThrow=function(t,e,r){_throws(!1,t,e,r)},assert.ifError=function(t){if(t)throw t},assert.strict=objectAssign(strict,assert,{equal:assert.strictEqual,deepEqual:assert.deepStrictEqual,notEqual:assert.notStrictEqual,notDeepEqual:assert.notDeepStrictEqual}),assert.strict.strict=assert.strict;var objectKeys=Object.keys||function(t){var e=[];for(var r in t)hasOwn.call(t,r)&&e.push(r);return e};

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"object-assign":9,"util/":6}],4:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};

},{}],5:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};

},{}],6:[function(require,module,exports){
(function (process,global){(function (){
var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}t=1;for(var n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(e){return"[Circular]"}default:return e}}),s=n[t];t<i;s=n[++t])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},exports.deprecate=function(e,r){if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var t=!1;return function(){if(!t){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),t=!0}return e.apply(this,arguments)}};var debugEnviron,debugs={};function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function arrayToHash(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c,a="",l=!1,p=["{","}"];(isArray(r)&&(l=!0,p=["[","]"]),isFunction(r))&&(a=" [Function"+(r.name?": "+r.name:"")+"]");return isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0!==o.length||l&&0!=r.length?t<0?isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=l?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,l)}),e.seen.pop(),reduceToSingleString(c,a,p)):p[0]+a+p[1]}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;s<u;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=isNull(t)?formatValue(e,c.value,null):formatValue(e,c.value,t-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){return e.reduce(function(e,r){return 0,r.indexOf("\n")>=0&&0,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};

}).call(this)}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":5,"_process":17,"inherits":4}],7:[function(require,module,exports){
module.exports=[
	"area",
	"base",
	"br",
	"col",
	"embed",
	"hr",
	"img",
	"input",
	"link",
	"menuitem",
	"meta",
	"param",
	"source",
	"track",
	"wbr"
]

},{}],8:[function(require,module,exports){
"use strict";module.exports=require("./html-tags-void.json");

},{"./html-tags-void.json":7}],9:[function(require,module,exports){
"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){for(var s in t=Object(arguments[a]))hasOwnProperty.call(t,s)&&(o[s]=t[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

},{}],10:[function(require,module,exports){
const assert=require("assert"),selfClosingTags=new Set(require("html-tags/void")),esc=require("./escape"),utils=require("pigeonmark-utils");function frequency(e,t){const i=Object.fromEntries([...t].map(e=>[e,0]));for(const t of`${e}`)"number"==typeof i[t]&&(i[t]+=1);return i}const build=module.exports={*any(e){const t=utils.get.type(e),i=build[t];if(!i)throw new Error(`Cannot encode type ${JSON.stringify(t)} for element ${JSON.stringify(e)}`);yield*i(e)},*tag(e){const t=utils.get.name(e),i=e[1]&&"object"==typeof e[1]&&!Array.isArray(e[1]),s=i?e[1]:void 0;if(assert("string"==typeof t,"tag name must be a string"),assert(t.match(/^[a-zA-Z0-9]+$/),"tag name must be alphanumeric"),selfClosingTags.has(t.toLowerCase())){if(e.length>(i?2:1))throw new Error(`<${t}> html element cannot contain child nodes`);yield`<${t}${[...build.attributes(s)].join("")}>`}else{yield`<${t}${[...build.attributes(s)].join("")}>`;for(const t of e.slice(i?2:1))yield*build.any(t);yield`</${t}>`}},*text(e){yield esc(e,"&<")},*attributes(e){for(const t in e){const i=`${e[t]}`;if(assert(!`${t}`.match(/[ "'>/=\0\cA-\cZ\u007F-\u009F]/),"invalid attribute name"),!0===i||""===i)yield` ${t}`;else{if(!i)continue;if("string"==typeof i)if(i.match(/[ "'`=<>]/)){const e=frequency(i,"'\"");e['"']>e["'"]?yield` ${t}='${esc(i,"&'")}'`:yield` ${t}="${esc(i,'&"')}"`}else yield` ${t}=${esc(i,"\"'&<>")}`}}},*comment(e){yield`\x3c!--${utils.get.text(e).replace("--"," - -")}--\x3e`},*fragment(e){for(const t of utils.get.childNodes(e))yield*build.any(t)},*document(e){const t=utils.get.attribute(e,"doctype");"string"==typeof t&&(yield`<!DOCTYPE ${t}>\n`);for(const t of utils.get.childNodes(e))yield*build.any(t)},*cdata(e){const t=utils.get.text(e);assert(!t.includes("]]>"),"CDATA cannot contain the literal text ]]>"),yield`<![CDATA[${t}]]>`}};

},{"./escape":12,"assert":3,"html-tags/void":8,"pigeonmark-utils":13}],11:[function(require,module,exports){
const build=require("./build-html");module.exports=function(u){return[...build.any(u)].join("")};

},{"./build-html":10}],12:[function(require,module,exports){
const legacyEntities=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucir","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],pattern=`([<>"']|&[#a-zA-Z0-9][a-zA-Z0-9]*;|&(${legacyEntities.join("|")}))`,regexp=new RegExp(pattern,"g");module.exports=function(e,c){const a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};return e.replace(regexp,e=>{const r=e[0];return(c.includes(r)?a[r]:r)+e.slice(1)})};

},{}],13:[function(require,module,exports){
const typeLabels={"#document":"document","#cdata-section":"cdata","#comment":"comment","#document-fragment":"fragment"};function isAttrs(t){if(!t||"object"!=typeof t||Array.isArray(t))return!1;for(const e in t){if("string"!=typeof e||e.includes(" "))return!1;if("string"!=typeof t[e])return!1}return!0}exports.get={type(t){if(Array.isArray(t)){if(t.length>0&&"string"==typeof t[0]&&t[0].length>0&&!t[0].includes(" ")){const e=t[0];if(e.startsWith("#"))return typeLabels[e];if(e.startsWith("?"))return"pi";if(t.every((t,e)=>Array.isArray(t)||"string"==typeof t||1===e&&isAttrs(t)))return"tag"}}else{if("string"==typeof t)return"text";if(t&&"object"==typeof t&&isAttrs(t))return"attributes"}},name(t){const e=exports.get.type(t);return"tag"===e?t[0]:"pi"===e?t[0].slice(1):void 0},attribute:(t,e)=>exports.get.attributes(t)[e],attributes:t=>Array.isArray(t)&&"string"==typeof t[0]&&"object"==typeof t[1]&&!Array.isArray(t[1])?t[1]:{},children(t){if(["tag","document","fragment"].includes(exports.get.type(t)))return t.filter((t,e)=>e>0&&"tag"===exports.get.type(t))},childNodes(t){if(["tag","document","fragment"].includes(exports.get.type(t)))return isAttrs(t[1])?t.slice(2):t.slice(1)},id:t=>exports.get.attribute(t,"id"),classList(t){const e=exports.get.attribute(t,"class")||"";return""===e.trim()?[]:e.split(/ +/)},text(t){const e=exports.get.type(t);if("text"===e)return t;if("cdata"===e)return t.slice(1).join("");if("comment"===e)return t.slice(1).join("");if("pi"===e)return t.slice(1).join("");return[...function*t(e){const r=exports.get.childNodes(e);for(const e of r||[]){const r=exports.get.type(e);"text"===r?yield e:"cdata"===r?yield*e.slice(1):yield*t(e)}}(t)].join("")}},exports.set={name(t,e){const r=exports.get.type(t);return"tag"===r?t[0]=e:"pi"===r&&(t[0]=`?${e}`),t},attribute(t,e,r){if(Array.isArray(t)&&"string"==typeof t[0])if("object"!=typeof t[1]||Array.isArray(t[1])){const s=t.shift(),i={[e]:r};t.unshift(s,i)}else t[1][e]=r;return t},attributes(t,e){if(Array.isArray(t)&&"string"==typeof t[0])if("object"!=typeof t[1]||Array.isArray(t[1])){const r=t.shift();t.unshift(r,e)}else t[1]=e;return t},children:(t,e)=>exports.set.childNodes(t,e),childNodes(t,e){const r=exports.get.type(t);if(!["tag","document","fragment"].includes(r))throw new Error("can only set children on tag, document, and fragment nodes");return t[1]&&"object"==typeof t[1]&&!Array.isArray(t[1])?(t.length=2,t.push(...e)):(t.length=1,t.push(...e)),t},id:(t,e)=>exports.set.attribute(t,"id",`${e}`),classList:(t,e)=>(Array.isArray(e)&&(e=e.join(" ")),exports.set.attribute(t,"class",`${e}`)),text:(t,e)=>exports.set.children(t,[`${e}`])},exports.isPigeonMark=function t(e){if("string"==typeof e)return!0;if(Array.isArray(e)){const r=e[0];if("string"==typeof r&&r.length>0&&!r.includes(" "))return 1===e.length||("object"!=typeof e[1]||Array.isArray(e[1])?e.every((e,r)=>0===r||t(e)):!Object.keys(e[1]).some(t=>"string"!=typeof t||t.match(/[ =]/))&&e.every((e,r)=>r<=1||t(e)))}return!1};

},{}],14:[function(require,module,exports){
const util=require("./index");exports.isTag=(t=>"tag"===util.get.type(t)),exports.tag=(t=>util.get.name(t)||""),exports.id=(t=>util.get.id(t)||""),exports.className=(t=>exports.attr(t,"class")||""),exports.attr=((t,e)=>util.get.attribute(t,e)),exports.children=(t=>util.get.children(t)),exports.contents=(t=>util.get.text(t));const nodeParents=new WeakMap;exports.parent=(t=>nodeParents.get(t)),exports.scan=(t=>{const e=util.get.children(t);if(e&&e.length>0)for(const s of e)nodeParents.has(s)||(nodeParents.set(s,t),exports.scan(s))});

},{"./index":13}],15:[function(require,module,exports){
const utils=require("pigeonmark-utils"),esc=require("./escape"),assert=require("assert");function frequency(t,e){const i=Object.fromEntries([...e].map(t=>[t,0]));for(const e of`${t}`)"number"==typeof i[e]&&(i[e]+=1);return i}const builders={*text(t){yield esc(t,"<&")},*tag(t){const e=utils.get.name(t),i=utils.get.attributes(t),n=utils.get.childNodes(t);if(assert(e.match(/^[^\r\n\t. ?!#][^\r\n\t ?!#]*$/),"tag name must not be empty, and cannot contain whitespace, ?, !, #, and cannot start with a period"),n.length>0){yield`<${e}${[...builders.attributes(i)].join("")}>`;for(const t of n)yield*build(t);yield`</${e}>`}else yield`<${e}${[...builders.attributes(i)].join("")}/>`},*attributes(t){for(const[e,i]of Object.entries(t)){assert(e.match(/^[^\r\n\t ?!=]+$/gm),"attribute name cannot contain whitespace, question marks, explanation marks, and must not be empty");const t=frequency(i,"'\"");t['"']<=t["'"]?yield` ${e}="${esc(i,'&>"')}"`:yield` ${e}='${esc(i,"&>'")}'`}},*comment(t){yield`\x3c!--${utils.get.text(t)}--\x3e`},*cdata(t){const e=utils.get.text(t);if(e.includes("]]>"))throw new Error('Cannot encode cdata block containing string "]]>" safely.');yield`<![CDATA[${e}]]>`},*document(t){const e=utils.get.attributes(t);for(const t of e.xmlpi||[])yield*builders.pi(t);e.doctype&&(yield`<!DOCTYPE ${e.doctype}>\n`);const i=utils.get.children(t);if(1===i.length)yield*builders.tag(i[0]);else if(i.length>1)throw new Error("XML documents cannot have multiple root tags")},*fragment(t){for(const e of utils.get.childNodes(t))yield*build(e)},*pi(t){const e=utils.get.name(t),i=utils.get.attributes(t);yield`<?${e}${[...builders.attributes(i)].join("")}?>\n`}};function*build(t){const e=utils.get.type(t);yield*builders[e](t)}module.exports=function(t){return[...build(t)].join("")};

},{"./escape":16,"assert":3,"pigeonmark-utils":13}],16:[function(require,module,exports){
module.exports=function(t,e){const o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return t.replace(/[&<>"']/g,t=>e.includes(t)?o[t]:t)};

},{}],17:[function(require,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],18:[function(require,module,exports){
"use strict";function __export(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(require("./selectorParser"));var matches_1=require("./matches");exports.createMatches=matches_1.createMatches;var querySelector_1=require("./querySelector");exports.createQuerySelector=querySelector_1.createQuerySelector;

},{"./matches":19,"./querySelector":20,"./selectorParser":21}],19:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var selectorParser_1=require("./selectorParser");function createMatches(e){return function(r,t){var n="object"==typeof r?r:selectorParser_1.parseSelector(r),i=n.tag,s=n.id,a=n.classList,f=n.attributes,o=n.nextSelector,c=n.pseudos;if(void 0!==o)throw new Error("matches can only process selectors that target a single element");if(!t)return!1;if(i&&i.toLowerCase()!==e.tag(t).toLowerCase())return!1;if(s&&s!==e.id(t))return!1;for(var u=e.className(t).split(" "),l=0;l<a.length;l++)if(-1===u.indexOf(a[l]))return!1;for(var d in f){var h=e.attr(t,d),p=f[d][0],v=f[d][1];if(void 0===h)return!1;if("has"===p)return!0;if("exact"===p&&h!==v)return!1;if("exact"!==p){if("string"!=typeof v)throw new Error("All non-string values have to be an exact match");if("startsWith"===p&&!h.startsWith(v))return!1;if("endsWith"===p&&!h.endsWith(v))return!1;if("contains"===p&&-1===h.indexOf(v))return!1;if("whitespace"===p&&-1===h.split(" ").indexOf(v))return!1;if("dash"===p&&-1===h.split("-").indexOf(v))return!1}}for(l=0;l<c.length;l++){var x=c[l],g=(p=x[0],x[1]);if("contains"===p&&g!==e.contents(t))return!1;if("empty"===p&&(e.contents(t)||0!==e.children(t).length))return!1;if("root"===p&&void 0!==e.parent(t))return!1;if(-1!==p.indexOf("child")){if(!e.parent(t))return!1;var O=e.children(e.parent(t));if("first-child"===p&&0!==O.indexOf(t))return!1;if("last-child"===p&&O.indexOf(t)!==O.length-1)return!1;if("nth-child"===p){var w=/([\+-]?)(\d*)(n?)(\+\d+)?/.exec(g).slice(1),m=O.indexOf(t);w[0]||(w[0]="+");var y=w[1]?parseInt(w[0]+w[1]):void 0,b=parseInt(w[3]||"0");if(y&&"n"===w[2]&&m%y!==b)return!1;if(!y&&w[2]&&("+"===w[0]&&m-b<0||"-"===w[0]&&m-b>=0))return!1;if(!w[2]&&y&&m!==y-1)return!1}}}return!0}}exports.createMatches=createMatches;

},{"./selectorParser":21}],20:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var selectorParser_1=require("./selectorParser"),matches_1=require("./matches");function createQuerySelector(e,r){var t=r||matches_1.createMatches(e);return function(r,n){if(!n)return[];var c="object"==typeof r?r:selectorParser_1.parseSelector(r),o=[n],u=c,i="subtree",a=void 0,f=function(){if(a=u.nextSelector,u.nextSelector=void 0,"subtree"===i||"child"===i){var r="subtree"===i?1/0:1;o=o.map(function(n){return function r(n,c,o){if(!o)return[];var u=t(n,o),i=u?"object"==typeof u?[u]:[o]:[];if(0===c)return i;var a=e.children(o).filter(function(e){return"string"!=typeof e}).map(function(e){return r(n,c-1,e)}).reduce(function(e,r){return e.concat(r)},[]);return i.concat(a)}(u,r,n)}).reduce(function(e,r){return e.concat(r)},[])}else{var n="nextSibling"===i;o=o.map(function(r){return function(r,n,c){if(!c||void 0===e.parent(c))return[];for(var o=[],u=e.children(e.parent(c)),i=u.indexOf(c)+1;i<u.length;i++)if("string"!=typeof u[i]){var a=t(r,u[i]);if(a&&("object"==typeof a?o.push(a):o.push(u[i])),n)break}return o}(u,n,r)}).reduce(function(e,r){return e.concat(r)},[])}a&&(u=a[1],i=a[0])};do{f()}while(void 0!==a);return o}}exports.createQuerySelector=createQuerySelector;

},{"./matches":19,"./selectorParser":21}],21:[function(require,module,exports){
"use strict";var __assign=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};Object.defineProperty(exports,"__esModule",{value:!0});var IDENT="[\\w-]+",SPACE="[ \t]*",VALUE="[^\\]]+",CLASS="(?:\\."+IDENT+")",ID="(?:#"+IDENT+")",OP="(?:=|\\$=|\\^=|\\*=|~=|\\|=)",ATTR="(?:\\["+SPACE+IDENT+SPACE+"(?:"+OP+SPACE+VALUE+SPACE+")?\\])",SUBTREE="(?:[ \t]+)",CHILD="(?:"+SPACE+"(>)"+SPACE+")",NEXT_SIBLING="(?:"+SPACE+"(\\+)"+SPACE+")",SIBLING="(?:"+SPACE+"(~)"+SPACE+")",COMBINATOR="(?:"+SUBTREE+"|"+CHILD+"|"+NEXT_SIBLING+"|"+SIBLING+")",CONTAINS='contains\\("[^"]*"\\)',FORMULA="(?:even|odd|\\d*(?:-?n(?:\\+\\d+)?)?)",NTH_CHILD="nth-child\\("+FORMULA+"\\)",PSEUDO=":(?:first-child|last-child|"+NTH_CHILD+"|empty|root|"+CONTAINS+")",TAG="(:?"+IDENT+")?",TOKENS=CLASS+"|"+ID+"|"+ATTR+"|"+PSEUDO+"|"+COMBINATOR,combinatorRegex=new RegExp("^"+COMBINATOR+"$");function parseSelector(t){var e=t.trim(),r=new RegExp(TAG,"y"),n=r.exec(e)[0],s=new RegExp(TOKENS,"y");s.lastIndex=r.lastIndex;for(var i=[],a=void 0,o=void 0,c=-1;s.lastIndex<e.length;){var u=s.exec(e);if(!u&&void 0===o)throw new Error("Parse error, invalid selector");if(u&&combinatorRegex.test(u[0])){o=combinatorRegex.exec(u[0])[0],c=s.lastIndex}else{if(void 0!==o){a=[getCombinator(o),parseSelector(e.substring(c))];break}i.push(u[0])}}var l=i.filter(function(t){return t.startsWith(".")}).map(function(t){return t.substring(1)}),f=i.filter(function(t){return t.startsWith("#")}).map(function(t){return t.substring(1)});if(f.length>1)throw new Error("Invalid selector, only one id is allowed");var E=new RegExp("("+IDENT+")"+SPACE+"("+OP+")?"+SPACE+"("+VALUE+")?"),d=i.filter(function(t){return t.startsWith("[")}).map(function(t){return E.exec(t).slice(1,4)}).map(function(t){var e,r=t[0],n=t[1],s=t[2];return(e={})[r]=[getOp(n),s?parseAttrValue(s):s],e}).reduce(function(t,e){return __assign({},t,e)},{}),S=i.filter(function(t){return t.startsWith(":")}).map(function(t){return postProcessPseudos(t.substring(1))});return{id:f[0]||"",tag:n,classList:l,attributes:d,nextSelector:a,pseudos:S}}function parseAttrValue(t){if(t.startsWith('"'))return t.slice(1,-1);if("true"===t)return!0;if("false"===t)return!1;var e=parseFloat(t);return isNaN(e)?t:e}function postProcessPseudos(t){if("first-child"===t||"last-child"===t||"root"===t||"empty"===t)return[t,void 0];if(t.startsWith("contains"))return["contains",t.slice(10,-2)];var e=t.slice(10,-1);return"even"===e&&(e="2n"),"odd"===e&&(e="2n+1"),["nth-child",e]}function getOp(t){switch(t){case"=":return"exact";case"^=":return"startsWith";case"$=":return"endsWith";case"*=":return"contains";case"~=":return"whitespace";case"|=":return"dash";default:return"has"}}function getCombinator(t){switch(t.trim()){case">":return"child";case"+":return"nextSibling";case"~":return"sibling";default:return"subtree"}}exports.parseSelector=parseSelector;

},{}]},{},[1]);
